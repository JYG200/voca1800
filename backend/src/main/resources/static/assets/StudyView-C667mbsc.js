import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as m,b as y,g as w,e as F,f as t,t as o,s as x,v as u,u as R,x as Y,y as q,z as H,n as V,d as I,A as O,h as l,c as T,w as P,m as U,p as j}from"./index-DlJT_SHl.js";const G={class:"study-header"},J={class:"header-center"},K={class:"header-title"},Q={class:"header-progress-track"},Z={class:"header-count"},tt={class:"count-done"},et={class:"count-total"},st={__name:"StudyHeader",props:{unitId:{type:String,default:"1"},total:{type:Number,default:0},remaining:{type:Number,default:0}},setup(v){const d=v,c=u(()=>d.total-d.remaining),p=u(()=>d.total===0?0:c.value/d.total*100);return(r,s)=>(m(),y("header",G,[w(F,{icon:"mdi-chevron-left",variant:"text",color:"#7c3aed",onClick:s[0]||(s[0]=g=>r.$router.go(-1))}),t("div",J,[t("span",K,"Day "+o(v.unitId),1),t("div",Q,[t("div",{class:"header-progress-fill",style:x({width:p.value+"%"})},null,4)])]),t("div",Z,[t("span",tt,o(c.value),1),s[1]||(s[1]=t("span",{class:"count-sep"}," / ",-1)),t("span",et,o(v.total),1)])]))}},at=b(st,[["__scopeId","data-v-9a56eea7"]]),nt={id:"study-main"},ot={class:"card-container"},rt={class:"card-face card-front"},it={class:"word-group"},lt={class:"word-text"},dt={class:"phonetic-text"},ct={class:"card-face card-front"},ut={class:"card-content-wrapper"},vt={class:"word-group"},pt={class:"word-text"},gt={class:"phonetic-text"},mt={class:"card-face card-back"},ft={class:"card-content-wrapper"},ht={class:"word-group"},_t={class:"word-text word-text-back"},yt={class:"phonetic-text phonetic-text-back"},wt={class:"meaning-group"},xt={class:"meaning-text"},$t={key:1,class:"empty-state position-absolute w-100 h-100 d-flex flex-column align-center justify-center"},bt={class:"complete-sub"},Mt={__name:"StudyMain",emits:["update-progress"],setup(v,{emit:d}){const c=R(),p=d,r=[{id:1,word:"Apple",meaning:"ì‚¬ê³¼",phonetic:"[Ã¦pl]"},{id:2,word:"Banana",meaning:"ë°”ë‚˜ë‚˜",phonetic:"[bÉ™ËˆnÃ¦nÉ™]"},{id:3,word:"Cherry",meaning:"ì²´ë¦¬",phonetic:"[ËˆtÊƒeri]"}],s=l([...r]),g=l(!1),B=l(null),n=l("idle"),M=l({x:0,y:0}),i=l(0),f=l(!1),$=l(!1);Y(()=>s.value.length,a=>{p("update-progress",{total:r.length,remaining:a})},{immediate:!0});const A=a=>{n.value==="idle"&&(M.value={x:a.clientX,y:a.clientY},i.value=0,f.value=!0,$.value=!1,window.addEventListener("pointermove",S),window.addEventListener("pointerup",k))},S=a=>{if(!f.value)return;const e=a.clientX-M.value.x;Math.abs(e)>5&&($.value=!0,n.value="dragging",i.value=e)},k=()=>{if(window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",k),!!f.value){if(f.value=!1,!$.value||Math.abs(i.value)<8){n.value="idle",i.value=0,g.value=!g.value;return}i.value<-130?C("left"):i.value>130?C("right"):(n.value="returning",i.value=0,setTimeout(()=>{n.value="idle"},500))}},E=u(()=>({"is-flying-left":n.value==="flying-left","is-flying-right":n.value==="flying-right","is-returning":n.value==="returning","is-entering":n.value==="entering"})),L=u(()=>{if(n.value==="dragging"){const a=i.value,e=Math.min(Math.max(a/12,-25),25),h=Math.max(.75,1-Math.abs(a)/280),_=Math.min(1,Math.abs(a)/130),D=a<0,X=D?`rgba(52, 211, 153, ${_*.7})`:`rgba(248, 113, 113, ${_*.7})`,z=D?`rgba(52, 211, 153, ${_*.13})`:`rgba(248, 113, 113, ${_*.13})`;return{transform:`translateX(${a}px) rotate(${e}deg)`,opacity:h,transition:"none",filter:`drop-shadow(0 12px 36px ${X})`,"--overlay-color":z}}return{"--overlay-color":"transparent"}}),C=a=>{g.value=!1,n.value=a==="left"?"flying-left":"flying-right",setTimeout(()=>{const e=s.value.shift();a==="right"&&s.value.push({...e,id:Date.now()}),i.value=0,n.value="entering",requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.value="idle"})})},380)},N=u(()=>1),W=u(()=>{if(n.value==="dragging"){const a=Math.min(1,Math.abs(i.value)/130),e=.97+a*.03,h=8-a*8;return{transform:`scale(${e}) translateY(${h}px)`,transition:"none"}}return{}});return(a,e)=>(m(),y("main",nt,[t("div",ot,[q(t("div",{class:"word-card next-card",style:x(W.value)},[t("div",rt,[e[2]||(e[2]=t("div",{class:"card-tag"},"Day 1",-1)),t("div",{class:"card-content-wrapper",style:x({opacity:N.value,transition:"none"})},[t("div",it,[t("h1",lt,o((s.value[1]??s.value[0])?.word),1),t("p",dt,o((s.value[1]??s.value[0])?.phonetic),1)]),e[1]||(e[1]=t("p",{class:"hint-text"},"íƒ­í•˜ì—¬ ëœ» í™•ì¸ ðŸ‘†",-1))],4),e[3]||(e[3]=t("div",{class:"guide-text"},"â† ì™¸ì›€ Â |Â  ë¯¸í¡ â†’",-1))])],4),[[H,s.value.length>0]]),s.value.length>0?(m(),y("div",{key:0,ref_key:"topCardRef",ref:B,class:V(["word-card top-card",E.value]),style:x(L.value),onPointerdown:A},[t("div",{class:V(["card-inner",{"is-flipped":g.value}])},[t("div",ct,[e[5]||(e[5]=t("div",{class:"drag-overlay"},null,-1)),e[6]||(e[6]=t("div",{class:"card-tag"},"Day 1",-1)),t("div",ut,[t("div",vt,[t("h1",pt,o(s.value[0].word),1),t("p",gt,o(s.value[0].phonetic),1)]),e[4]||(e[4]=t("p",{class:"hint-text"},"íƒ­í•˜ì—¬ ëœ» í™•ì¸ ðŸ‘†",-1))]),e[7]||(e[7]=t("div",{class:"guide-text"},"â† ì™¸ì›€ Â |Â  ë¯¸í¡ â†’",-1))]),t("div",mt,[e[8]||(e[8]=t("div",{class:"drag-overlay"},null,-1)),e[9]||(e[9]=t("div",{class:"card-tag tag-back"},"Day 1",-1)),t("div",ft,[t("div",ht,[t("h1",_t,o(s.value[0].word),1),t("p",yt,o(s.value[0].phonetic),1)]),t("div",wt,[t("span",xt,o(s.value[0].meaning),1)])]),e[10]||(e[10]=t("div",{class:"guide-text guide-text-back"},"â† ì™¸ì›€ Â |Â  ë¯¸í¡ â†’",-1))])],2)],38)):I("",!0),s.value.length===0?(m(),y("div",$t,[e[11]||(e[11]=t("div",{class:"complete-icon"},"ðŸŽ‰",-1)),e[12]||(e[12]=t("h2",{class:"complete-title"},"í•™ìŠµ ì™„ë£Œ!",-1)),t("p",bt,o(r.length)+"ê°œ ë‹¨ì–´ë¥¼ ëª¨ë‘ ì™¸ì› ì–´ìš”",1),t("button",{class:"reset-btn",onClick:e[0]||(e[0]=h=>O(c).push({name:"main"}))},"í™•ì¸")])):I("",!0)])]))}},St=b(Mt,[["__scopeId","data-v-8c96793c"]]),kt={class:"header-wrapper"},Ct={__name:"StudyView",setup(v){const d=l(0),c=l(0),p=r=>{d.value=r.total,c.value=r.remaining};return(r,s)=>(m(),T(U,null,{default:P(()=>[w(j,{class:"study-scroll-area"},{default:P(()=>[t("div",kt,[w(at,{unitId:r.$route.params.id,total:d.value,remaining:c.value},null,8,["unitId","total","remaining"])]),w(St,{onUpdateProgress:p})]),_:1})]),_:1}))}},It=b(Ct,[["__scopeId","data-v-33a6df50"]]);export{It as default};
